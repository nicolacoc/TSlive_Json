/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/PaginaEdati.ts":
/*!****************************!*\
  !*** ./src/PaginaEdati.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getToPage = exports.getResult = exports.PromiseToAirQualityData = exports.GetMap = void 0;\nvar fetch_1 = __webpack_require__(/*! ./fetch */ \"./src/fetch.ts\");\nfunction GetMap(lat, lng) {\n    var key = \"\";\n    return \"<div class=\\\"map\\\">\\n            <iframe\\n                width=\\\"450\\\"\\n                height=\\\"250\\\"\\n                frameBorder=\\\"0\\\"\\n                style=\\\"border:0\\\"\\n                referrerPolicy=\\\"no-referrer-when-downgrade\\\"\\n                src=\\\"https://www.google.com/maps/embed/v1/view?key=\".concat(key, \"&center=\").concat(lat, \",\").concat(lng, \"&zoom=18&maptype=satellite\\\"\\n                allowFullScreen>\\n            </iframe>\\n        </div>\");\n}\nexports.GetMap = GetMap;\nfunction PromiseToAirQualityData(PromisesResult) {\n    var _this = this;\n    // const promisesLocation: any[] = [];\n    return PromisesResult.map(function (singleResult) { return __awaiter(_this, void 0, void 0, function () {\n        var Location_1, Long, Lat, PlaceID, LocationItem, Address, City;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!(singleResult instanceof Array)) return [3 /*break*/, 2];\n                    Location_1 = singleResult[0].location;\n                    Long = Number.parseFloat(Location_1.longitude);\n                    Lat = Number.parseFloat(Location_1.latitude);\n                    PlaceID = Location_1.id;\n                    if (isNaN(PlaceID)) {\n                        throw new Error(\"Place id non è un numero!!\");\n                    }\n                    if (isNaN(Long) || isNaN(Lat)) {\n                        throw new Error(\"Long o Lat non è un numero!!\");\n                    }\n                    return [4 /*yield*/, (0, fetch_1.FetchLocation)(Lat, Long)];\n                case 1:\n                    LocationItem = _a.sent();\n                    Address = LocationItem.address;\n                    City = Address.city;\n                    if (typeof City === \"undefined\") {\n                        City = Address.town;\n                    }\n                    return [2 /*return*/, {\n                            Location: {\n                                City: City,\n                                Country: Address.country,\n                                Lat: Lat,\n                                Long: Long\n                            },\n                            DataSnapshot: singleResult.map(function (Result) {\n                                var Values = __spreadArray([], Result.sensordatavalues, true);\n                                var TimeStamp = Result.timestamp;\n                                return {\n                                    Values: Values,\n                                    TimeStamp: TimeStamp\n                                };\n                            })\n                        }];\n                case 2: return [2 /*return*/];\n            }\n        });\n    }); });\n}\nexports.PromiseToAirQualityData = PromiseToAirQualityData;\nfunction getResult(data) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Promise.all(data)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.getResult = getResult;\nfunction GetDataSnapshot(DataSnapshot) {\n    var Tot = \"\";\n    DataSnapshot.forEach(function (_a) {\n        var Values = _a.Values, TimeStamp = _a.TimeStamp;\n        Tot += \"<ul class=\\\"snapshot-data list-group list-group-flush\\\">\";\n        Values.forEach(function (_a) {\n            var value_type = _a.value_type, value = _a.value;\n            var Value1;\n            var type;\n            if (value_type === \"temperature\") {\n                type = \"Temperatura\";\n                Value1 = \"\".concat(Math.round(Number.parseFloat(value)), \"\\u00B0C\");\n            }\n            else if (value_type === \"humidity\") {\n                type = \"Umidità\";\n                Value1 = \"\".concat(Math.round(Number.parseFloat(value)), \"%\");\n            }\n            else if (value_type === \"pressure\") {\n                type = \"Pressione\";\n                Value1 = \"\".concat(value, \"hPa\");\n            }\n            else if (value_type === \"pressure_at_sealevel\") {\n                type = \"Pressione al livello del mare\";\n                Value1 = \"\".concat(value, \"hPa\");\n            }\n            else if (value_type === \"P1\") {\n                type = \"PM10\";\n                Value1 = \"\".concat(value);\n            }\n            else if (value_type === \"P2\") {\n                type = \"PM25\";\n                Value1 = \"\".concat(value);\n            }\n            else {\n                type = value_type;\n                Value1 = \"\".concat(value);\n            }\n            Tot += \"<li class=\\\"list-group-item d-flex\\\">\\n                                <div class=\\\"row\\\">\\n                                <div class=\\\"col me-5\\\">\".concat(type, \"</div>\\n                                <div class=\\\"col\\\">\").concat(Value1, \"</div>\\n                            </div>\\n                            </li>\");\n        });\n        var ts = new Date(TimeStamp);\n        Tot += \"\\n                        </ul>\\n                        <div class=\\\"card-body text-end\\\">\\n                            <strong>\".concat(ts.toLocaleDateString('it-IT'), \" \").concat(ts.toLocaleTimeString('it-IT'), \"</strong>\\n                        </div>\\n                    \");\n    });\n    return Tot;\n}\nfunction getToPage(Data) {\n    var Cont = document.querySelector(\".container\");\n    if (Cont) {\n        var Tot = \"\";\n        for (var i = 0; i < Data.length; i++) {\n            var Row = document.createElement(\"div\");\n            Row.setAttribute(\"class\", \"row\");\n            var Location_2 = Data[i].Location;\n            var Lat = Location_2.Lat;\n            var Lng = Location_2.Long;\n            var Country = Location_2.Country;\n            var City = Location_2.City;\n            var DataSnapshot = Data[i].DataSnapshot;\n            Tot += \"\\n        <div class=\\\"col\\\">\\n            <h1>Air Quality:</h1>\\n            <div class=\\\"card\\\" style=\\\"width: 450px;\\\">\\n               \".concat(GetMap(Lat, Lng), \"\\n                <div class=\\\"card-body\\\">\\n                    <h5 class=\\\"card-title\\\">\").concat(City, \" (\").concat(Country, \")</h5>\\n                </div>\\n\\n                    <div class=\\\"card-body\\\">\\n\\n                          <div class=\\\"card mt-2\\\">\\n\\n\\n\");\n            Tot += GetDataSnapshot(DataSnapshot);\n            Tot += \"</div>\\n                </div>\\n            </div>\\n        </div>\";\n            i++;\n            if (i < Data.length) {\n                Location_2 = Data[i].Location;\n                Lat = Location_2.Lat;\n                Lng = Location_2.Long;\n                Country = Location_2.Country;\n                City = Location_2.City;\n                DataSnapshot = Data[i].DataSnapshot;\n                Tot += \"\\n        <div class=\\\"col\\\">\\n            <h1>Air Quality:</h1>\\n            <div class=\\\"card\\\" style=\\\"width: 450px;\\\">\\n               \".concat(GetMap(Lat, Lng), \"\\n                <div class=\\\"card-body\\\">\\n                    <h5 class=\\\"card-title\\\">\").concat(City, \" (\").concat(Country, \")</h5>\\n                </div>\\n\\n                    <div class=\\\"card-body\\\">\\n\\n                          <div class=\\\"card mt-2\\\">\\n\\n\\n\\n                        \");\n                Tot += GetDataSnapshot(DataSnapshot);\n                Tot += \"</div>\\n                    </div>\\n                </div>\\n            </div>\";\n            }\n            Row.innerHTML = Tot;\n            Cont.append(Row);\n        }\n    }\n}\nexports.getToPage = getToPage;\n\n\n//# sourceURL=webpack://tslive_json/./src/PaginaEdati.ts?");

/***/ }),

/***/ "./src/fetch.ts":
/*!**********************!*\
  !*** ./src/fetch.ts ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FetchLocation = exports.getAirQualityData = void 0;\nfunction getAirQualityData(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, status;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(url)];\n                case 1:\n                    response = _a.sent();\n                    status = response.ok;\n                    if (!status) return [3 /*break*/, 3];\n                    return [4 /*yield*/, response.json()];\n                case 2: return [2 /*return*/, _a.sent()];\n                case 3: throw new Error(\"Data not valid\");\n            }\n        });\n    });\n}\nexports.getAirQualityData = getAirQualityData;\nfunction FetchLocation(lat, lng) {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, status;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://nominatim.openstreetmap.org/reverse.php?lat=\".concat(lat, \"&lon=\").concat(lng, \"&zoom=18&format=jsonv2\"))];\n                case 1:\n                    response = _a.sent();\n                    status = response.ok;\n                    if (!status) return [3 /*break*/, 3];\n                    return [4 /*yield*/, response.json()];\n                case 2: return [2 /*return*/, _a.sent()];\n                case 3: throw new Error(\"Data Location not valid\");\n            }\n        });\n    });\n}\nexports.FetchLocation = FetchLocation;\n\n\n//# sourceURL=webpack://tslive_json/./src/fetch.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar fetch_1 = __webpack_require__(/*! ./fetch */ \"./src/fetch.ts\");\nvar PaginaEdati_1 = __webpack_require__(/*! ./PaginaEdati */ \"./src/PaginaEdati.ts\");\nvar promises = [\n    (0, fetch_1.getAirQualityData)(\"https://data.sensor.community/airrohr/v1/sensor/5959/\"),\n    (0, fetch_1.getAirQualityData)(\"https://data.sensor.community/airrohr/v1/sensor/8059/\")\n];\nvar p = Promise.all(promises);\np.then(PaginaEdati_1.PromiseToAirQualityData).then(PaginaEdati_1.getResult).then(PaginaEdati_1.getToPage);\n\n\n//# sourceURL=webpack://tslive_json/./src/index.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;